{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"w-screen p-5 container\"\n};\nconst _hoisted_2 = {\n  class: \"flex flex-col items-center mt-5 gap-4\"\n};\nconst _hoisted_3 = {\n  class: \"relative w-full h-auto max-h-[500px] overflow-y-scroll overflow-x-auto shadow-md sm:rounded-lg\"\n};\nconst _hoisted_4 = [\"id\"];\nconst _hoisted_5 = {\n  class: \"p-5 text-lg font-semibold text-left rtl:text-right text-gray-900 bg-white dark:text-white dark:bg-gray-800\"\n};\nconst _hoisted_6 = {\n  class: \"flex flex-row gap-2 items-center\"\n};\nconst _hoisted_7 = [\"id\", \"data-dropdown-toggle\"];\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"svg\", {\n  class: \"w-2.5 h-2.5 ms-3\",\n  \"aria-hidden\": \"true\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  fill: \"none\",\n  viewBox: \"0 0 10 6\"\n}, [/*#__PURE__*/_createElementVNode(\"path\", {\n  stroke: \"currentColor\",\n  \"stroke-linecap\": \"round\",\n  \"stroke-linejoin\": \"round\",\n  \"stroke-width\": \"2\",\n  d: \"m1 1 4 4 4-4\"\n})], -1 /* HOISTED */);\nconst _hoisted_9 = [\"id\"];\nconst _hoisted_10 = [\"aria-labelledby\"];\nconst _hoisted_11 = [\"onClick\"];\nconst _hoisted_12 = {\n  class: \"text-xs text-gray-100 uppercase bg-green-500 dark:bg-gray-700 dark:text-gray-400\"\n};\nconst _hoisted_13 = {\n  key: 0,\n  scope: \"col\",\n  class: \"px-2 py-3\"\n};\nconst _hoisted_14 = {\n  class: \"truncate bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-green-50 dark:hover:bg-gray-600\"\n};\nconst _hoisted_15 = {\n  key: 0,\n  class: \"w-4 p-4\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createCommentVNode(\"<Card title=\\\"گزارش\\\">\"), _createElementVNode(\"div\", _hoisted_1, [_createCommentVNode(\"  <p class=\\\"flex flex-row gap-2 items-center\\\">\"), _createCommentVNode(\"    <button @click=\\\"reload\\\" class=\\\"w-auto block text-white bg-green-500 hover:bg-green-600 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800\\\" type=\\\"button\\\">\"), _createCommentVNode(\"      بارگیری مجدد\"), _createCommentVNode(\"    </button>\"), _createCommentVNode(\"    {{ formattedTime }}\"), _createCommentVNode(\"  </p>\"), _createElementVNode(\"form\", _hoisted_2, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.forms, (val, form_name) => {\n    return _openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createElementVNode(\"table\", {\n      id: form_name,\n      class: \"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400\"\n    }, [_createElementVNode(\"caption\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createTextVNode(_toDisplayString(val.title) + \" \", 1 /* TEXT */), _createCommentVNode(\"                      <button @click=\\\"printTable(form_name)\\\" class=\\\"w-auto block text-white bg-green-500 hover:bg-green-600 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800\\\" type=\\\"button\\\">\"), _createCommentVNode(\"                        PDF\"), _createCommentVNode(\"                      </button>\"), _createCommentVNode(\"                      <button @click=\\\"generate_excel_report(form_name)\\\"  class=\\\"w-auto block text-white bg-green-500 hover:bg-green-600 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800\\\" type=\\\"button\\\">\"), _createCommentVNode(\"                      XLS\"), _createCommentVNode(\"                    </button>\"), _createElementVNode(\"button\", {\n      id: form_name + 'Button1',\n      \"data-dropdown-toggle\": form_name + 'dropdown1',\n      class: \"justify-between w-44 text-white bg-green-500 hover:bg-green-600 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800\",\n      type: \"button\"\n    }, [_createTextVNode(_toDisplayString(val.filter) + \" \", 1 /* TEXT */), _hoisted_8], 8 /* PROPS */, _hoisted_7), _createCommentVNode(\" Dropdown menu \"), _createElementVNode(\"div\", {\n      id: form_name + 'dropdown1',\n      class: \"z-50 hidden bg-white divide-y divide-gray-100 rounded-lg shadow w-44 dark:bg-gray-700\"\n    }, [_createElementVNode(\"ul\", {\n      class: \"overflow-y-auto h-auto max-h-48 py-2 text-sm text-gray-700 dark:text-gray-200\",\n      \"aria-labelledby\": form_name + 'Button1'\n    }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.filters, data => {\n      return _openBlock(), _createElementBlock(\"li\", null, [_createElementVNode(\"a\", {\n        onClick: $event => $options.clicked(form_name, data),\n        type: \"button\",\n        class: \"block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white\"\n      }, _toDisplayString(data.lable), 9 /* TEXT, PROPS */, _hoisted_11)]);\n    }), 256 /* UNKEYED_FRAGMENT */))], 8 /* PROPS */, _hoisted_10)], 8 /* PROPS */, _hoisted_9)])]), _createElementVNode(\"thead\", _hoisted_12, [_createElementVNode(\"tr\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(val.fields, (i, k) => {\n      return _openBlock(), _createElementBlock(_Fragment, null, [i != 'id' ? (_openBlock(), _createElementBlock(\"th\", _hoisted_13, _toDisplayString(i), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)], 64 /* STABLE_FRAGMENT */);\n    }), 256 /* UNKEYED_FRAGMENT */))])]), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(val.data, (v, index) => {\n      return _openBlock(), _createElementBlock(\"tr\", _hoisted_14, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(val.fields, (field, k) => {\n        return _openBlock(), _createElementBlock(_Fragment, null, [field != 'id' ? (_openBlock(), _createElementBlock(\"td\", _hoisted_15, _toDisplayString(v[field]), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)], 64 /* STABLE_FRAGMENT */);\n      }), 256 /* UNKEYED_FRAGMENT */))]);\n    }), 256 /* UNKEYED_FRAGMENT */))])], 8 /* PROPS */, _hoisted_4)]);\n  }), 256 /* UNKEYED_FRAGMENT */))])]), _createCommentVNode(\"</Card>\")], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createElementVNode","xmlns","fill","viewBox","stroke","d","key","scope","_createElementBlock","_Fragment","_createCommentVNode","_hoisted_1","_hoisted_2","_renderList","$data","forms","val","form_name","_hoisted_3","id","_hoisted_5","_hoisted_6","_createTextVNode","_toDisplayString","title","type","filter","_hoisted_8","_hoisted_7","filters","data","onClick","$event","$options","clicked","lable","_hoisted_11","_hoisted_10","_hoisted_9","_hoisted_12","fields","i","k","_hoisted_13","v","index","_hoisted_14","field","_hoisted_15","_hoisted_4"],"sources":["C:\\Users\\Amir\\ISMv988\\ISMv900\\frontend\\src\\components\\admin\\Products.vue"],"sourcesContent":["<script>\r\nimport { initFlowbite } from 'flowbite'\r\nimport Card from '@/components/Card'\r\nimport modal from \"@/components/Modal.vue\";\r\nimport Alert from \"@/components/Alert.vue\";\r\nimport Lic_numer from \"@/components/lic_numer.vue\";\r\nimport { jsPDF } from \"jspdf\";\r\nimport html2canvas from 'html2canvas';\r\n\r\nexport default {\r\n  name: \"Products\",\r\n  components: {\r\n    Lic_numer,\r\n    Card,\r\n    modal,\r\n    Alert\r\n  },\r\n  data(){\r\n    return {\r\n      forms: {\r\n        products:{type:'input', title: 'لیست محصولات',filter:'یک سال اخیر', data:'', value:'', fields: []},\r\n      },\r\n      filters: [\r\n        {lable:'یک سال اخیر', value: 'year'},\r\n        {lable:'یک ماه اخیر', value: 'month'},\r\n        {lable:'هفته اخیر', value: 'week'},\r\n        {lable:'امروز', value: 'day'},\r\n      ],\r\n      success: false,\r\n      error: false,\r\n      errors: [],\r\n    }\r\n  },\r\n  mounted() {\r\n    initFlowbite();\r\n    this.report_Products('year')\r\n  },\r\n  methods: {\r\n    async generate_excel_report(model_name){\r\n      console.log(model_name)\r\n      const params = {\r\n        'model_name':model_name,\r\n      }\r\n      const response = await this.axios.post('/myapp/api/generateExcelReport',{}, {params:params,responseType: 'blob',},)\r\n      // Create a URL for the blob\r\n      const url = window.URL.createObjectURL(new Blob([response.data]));\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n\r\n      // Suggest a filename for the downloaded file\r\n      const filename = response.headers['content-disposition'];\r\n      link.setAttribute('download', filename);\r\n\r\n      // Append the link to the body\r\n      document.body.appendChild(link);\r\n\r\n      // Simulate click to download the file\r\n      link.click();\r\n\r\n      // Remove the link from the body\r\n      document.body.removeChild(link);\r\n\r\n      console.log(response.data)\r\n    },\r\n    select(obj){\r\n      this.forms.shipment_list.value = obj\r\n    },\r\n    clicked(k, data){\r\n      if (k == 'products'){\r\n        this.forms.products.filter = data.lable\r\n        this.report_Products(data.value)\r\n      }\r\n    },\r\n    printTable(id) {\r\n        let table = document.getElementById(id); // Replace 'yourTableId' with your table's ID\r\n        console.log(table)\r\n        html2canvas(table).then(function(canvas) {\r\n            let imgData = canvas.toDataURL('image/png');\r\n            console.log(imgData)\r\n            var doc = new jsPDF('p', 'mm', 'a4');\r\n            var imgHeight = canvas.height * 210 / canvas.width;\r\n            doc.addImage(imgData, 'PNG', 0, 0, 210, imgHeight);\r\n            doc.save('table.pdf');\r\n        });\r\n    },\r\n\r\n    async report_Products(filter) {\r\n     try {\r\n        const params = {\r\n          'filter': filter,\r\n        }\r\n        const response = await this.axios.post('/myapp/ProductsPage/', {}, {params:params})\r\n        console.log(response.data);\r\n        this.forms['products'].data = response.data['values']\r\n        this.forms['products'].fields = response.data['fields']\r\n     } catch (error) {\r\n        console.error(\"Error fetching products report:\", error);\r\n        // Optionally, display an error message to the user\r\n        // this.errorMessage = \"Failed to fetch products report. Please try again.\";\r\n     }\r\n    },\r\n\r\n\r\n  },\r\n}\r\n</script>\r\n\r\n<template>\r\n\r\n\r\n<!--<Card title=\"گزارش\">-->\r\n  <div class=\"w-screen p-5 container\">\r\n<!--  <p class=\"flex flex-row gap-2 items-center\">-->\r\n<!--    <button @click=\"reload\" class=\"w-auto block text-white bg-green-500 hover:bg-green-600 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800\" type=\"button\">-->\r\n<!--      بارگیری مجدد-->\r\n<!--    </button>-->\r\n<!--    {{ formattedTime }}-->\r\n<!--  </p>-->\r\n  <form class=\"flex flex-col items-center mt-5 gap-4\">\r\n    <template v-for=\"(val, form_name) in forms\">\r\n        <div class=\"relative w-full h-auto max-h-[500px] overflow-y-scroll overflow-x-auto shadow-md sm:rounded-lg\">\r\n            <table :id=\"form_name\" class=\"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400\">\r\n                <caption class=\"p-5 text-lg font-semibold text-left rtl:text-right text-gray-900 bg-white dark:text-white dark:bg-gray-800\">\r\n\r\n                    <div class=\"flex flex-row gap-2 items-center\">\r\n                      {{val.title}}\r\n<!--                      <button @click=\"printTable(form_name)\" class=\"w-auto block text-white bg-green-500 hover:bg-green-600 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800\" type=\"button\">-->\r\n<!--                        PDF-->\r\n<!--                      </button>-->\r\n<!--                      <button @click=\"generate_excel_report(form_name)\"  class=\"w-auto block text-white bg-green-500 hover:bg-green-600 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800\" type=\"button\">-->\r\n<!--                      XLS-->\r\n<!--                    </button>-->\r\n                      <button :id=\"form_name + 'Button1'\" :data-dropdown-toggle=\"form_name+'dropdown1'\" class=\"justify-between w-44 text-white bg-green-500 hover:bg-green-600 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800\" type=\"button\">\r\n                        {{ val.filter }}\r\n                        <svg class=\"w-2.5 h-2.5 ms-3\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 10 6\">\r\n                          <path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"m1 1 4 4 4-4\"/>\r\n                        </svg>\r\n                      </button>\r\n                      <!-- Dropdown menu -->\r\n                      <div :id=\"form_name+'dropdown1'\" class=\"z-50 hidden bg-white divide-y divide-gray-100 rounded-lg shadow w-44 dark:bg-gray-700\">\r\n                        <ul class=\"overflow-y-auto h-auto max-h-48 py-2 text-sm text-gray-700 dark:text-gray-200\" :aria-labelledby=\"form_name + 'Button1'\">\r\n                          <li v-for=\"data in filters\">\r\n                            <a @click='clicked(form_name ,data)' type=\"button\" class=\"block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white\">\r\n                              {{ data.lable }}\r\n                            </a>\r\n                          </li>\r\n                        </ul>\r\n                      </div>\r\n\r\n                    </div>\r\n\r\n                </caption>\r\n                <thead class=\"text-xs text-gray-100 uppercase bg-green-500 dark:bg-gray-700 dark:text-gray-400\">\r\n                    <tr>\r\n                         <template v-for=\"(i ,k) in val.fields\">\r\n                           <template v-if=\"i !='id'\">\r\n                              <th scope=\"col\" class=\"px-2 py-3\">\r\n                                  {{i}}\r\n                              </th>\r\n                           </template>\r\n                      </template>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <template v-for=\"(v, index) in val.data\">\r\n                          <tr class=\"truncate bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-green-50 dark:hover:bg-gray-600\">\r\n                            <template v-for=\"(field ,k) in val.fields\">\r\n                              <template v-if=\"field !='id'\">\r\n                                <td class=\"w-4 p-4\">\r\n                                  {{ v[field] }}\r\n                                </td>\r\n                              </template>\r\n                            </template>\r\n                          </tr>\r\n                    </template>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    </template>\r\n  </form>\r\n  </div>\r\n<!--</Card>-->\r\n</template>\r\n\r\n"],"mappings":";;EA+GOA,KAAK,EAAC;AAAwB;;EAO7BA,KAAK,EAAC;AAAuC;;EAExCA,KAAK,EAAC;AAAgG;mBAxHnH;;EA0HyBA,KAAK,EAAC;AAA4G;;EAElHA,KAAK,EAAC;AAAkC;mBA5HjE;gCAsIwBC,mBAAA,CAEM;EAFDD,KAAK,EAAC,kBAAkB;EAAC,aAAW,EAAC,MAAM;EAACE,KAAK,EAAC,4BAA4B;EAACC,IAAI,EAAC,MAAM;EAACC,OAAO,EAAC;iBACtGH,mBAAA,CAA8G;EAAxGI,MAAM,EAAC,cAAc;EAAC,gBAAc,EAAC,OAAO;EAAC,iBAAe,EAAC,OAAO;EAAC,cAAY,EAAC,GAAG;EAACC,CAAC,EAAC;;mBAvIxH;oBAAA;oBAAA;;EAwJuBN,KAAK,EAAC;AAAkF;;EAxJ/GO,GAAA;EA4JkCC,KAAK,EAAC,KAAK;EAACR,KAAK,EAAC;;;EAStBA,KAAK,EAAC;AAA2G;;EArK/IO,GAAA;EAwKoCP,KAAK,EAAC;;;uBAxK1CS,mBAAA,CAAAC,SAAA,SA8GAC,mBAAA,0BAA2B,EACzBV,mBAAA,CAqEM,OArENW,UAqEM,GApERD,mBAAA,oDAAqD,EACrDA,mBAAA,iSAA8R,EAC9RA,mBAAA,sBAAyB,EACzBA,mBAAA,iBAAoB,EACpBA,mBAAA,2BAA8B,EAC9BA,mBAAA,UAAa,EACXV,mBAAA,CA6DO,QA7DPY,UA6DO,I,kBA5DLJ,mBAAA,CA2DWC,SAAA,QAlLfI,WAAA,CAuHyCC,KAAA,CAAAC,KAAK,EAvH9C,CAuHsBC,GAAG,EAAEC,SAAS;yBAC5BT,mBAAA,CAyDM,OAzDNU,UAyDM,GAxDFlB,mBAAA,CAuDQ;MAvDAmB,EAAE,EAAEF,SAAS;MAAElB,KAAK,EAAC;QACzBC,mBAAA,CA6BU,WA7BVoB,UA6BU,GA3BNpB,mBAAA,CAyBM,OAzBNqB,UAyBM,GArJ1BC,gBAAA,CAAAC,gBAAA,CA6HwBP,GAAG,CAACQ,KAAK,IAAE,GACnC,iBAAAd,mBAAA,kUAA+T,EAC/TA,mBAAA,+BAAkC,EAClCA,mBAAA,mCAAsC,EACtCA,mBAAA,8UAA2U,EAC3UA,mBAAA,6BAAgC,EAChCA,mBAAA,iCAAoC,EACdV,mBAAA,CAKS;MALAmB,EAAE,EAAEF,SAAS;MAAe,sBAAoB,EAAEA,SAAS;MAAclB,KAAK,EAAC,uQAAuQ;MAAC0B,IAAI,EAAC;QApI3XH,gBAAA,CAAAC,gBAAA,CAqI2BP,GAAG,CAACU,MAAM,IAAG,GAChB,iBAAAC,UAEM,C,iBAxI9BC,UAAA,GA0IsBlB,mBAAA,mBAAsB,EACtBV,mBAAA,CAQM;MARAmB,EAAE,EAAEF,SAAS;MAAclB,KAAK,EAAC;QACrCC,mBAAA,CAMK;MANDD,KAAK,EAAC,+EAA+E;MAAE,iBAAe,EAAEkB,SAAS;2BACnHT,mBAAA,CAIKC,SAAA,QAjJ/BI,WAAA,CA6I6CC,KAAA,CAAAe,OAAO,EAAfC,IAAI;2BAAftB,mBAAA,CAIK,aAHHR,mBAAA,CAEI;QAFA+B,OAAK,EAAAC,MAAA,IAAEC,QAAA,CAAAC,OAAO,CAACjB,SAAS,EAAEa,IAAI;QAAGL,IAAI,EAAC,QAAQ;QAAC1B,KAAK,EAAC;0BACpD+B,IAAI,CAACK,KAAK,wBA/I3CC,WAAA,E;sDAAAC,WAAA,E,iBAAAC,UAAA,E,KAwJgBtC,mBAAA,CAUQ,SAVRuC,WAUQ,GATJvC,mBAAA,CAQK,c,kBAPAQ,mBAAA,CAMQC,SAAA,QAhKjCI,WAAA,CA0JoDG,GAAG,CAACwB,MAAM,EA1J9D,CA0J2CC,CAAC,EAAEC,CAAC;2BA1J/ClC,mBAAA,CAAAC,SAAA,SA2J2CgC,CAAC,Y,cACdjC,mBAAA,CAEK,MAFLmC,WAEK,EAAApB,gBAAA,CADCkB,CAAC,oBA7JrC/B,mBAAA,e;0CAmKgBV,mBAAA,CAYQ,iB,kBAXJQ,mBAAA,CAUWC,SAAA,QA9K/BI,WAAA,CAoKmDG,GAAG,CAACc,IAAI,EApK3D,CAoKsCc,CAAC,EAAEC,KAAK;2BACpBrC,mBAAA,CAQK,MARLsC,WAQK,I,kBAPHtC,mBAAA,CAMWC,SAAA,QA5KvCI,WAAA,CAsK2DG,GAAG,CAACwB,MAAM,EAtKrE,CAsK8CO,KAAK,EAAEL,CAAC;6BAtKtDlC,mBAAA,CAAAC,SAAA,SAuK8CsC,KAAK,Y,cACnBvC,mBAAA,CAEK,MAFLwC,WAEK,EAAAzB,gBAAA,CADAqB,CAAC,CAACG,KAAK,qBAzK5CrC,mBAAA,e;;wDAAAuC,UAAA,E;wCAqLAvC,mBAAA,WAAc,C"},"metadata":{},"sourceType":"module","externalDependencies":[]}